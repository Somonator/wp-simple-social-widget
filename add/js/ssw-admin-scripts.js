/**
* The plugin "Simple Soc Wdiget" scripts for admin panel.
*/

jQuery(function(t){var e=function(e){e.find(".ssw-form").each(function(e){var n=+e+1,i=t(this).find("legend").text().replace(/\d+/,n);t(this).find("legend").text(i),t(this).find("*[name]").each(function(){var e=t(this).attr("name").replace(/-\d+/,"-"+n);t(this).attr("name",e)})}),e.find(".ssw-form").length>1?e.find(".delete").show():e.find(".delete").hide()},n={defaultColor:"#ffffff",change:function(){t(this).parents("form").change()}};t(document).delegate('[id*="simple_soc_button"] .add-new',"click",function(i){i.preventDefault();var a=t(this).parents("form"),r=t(this).parents().closest(".ssw-forms"),o=r.find(".ssw-form").eq(-1).clone();a=t(this).parents(".ssw-forms");o.find('input[type="hidden"], input[type="text"]').val(""),o.find("img").attr("src",o.find("img").data("default")),o.find(".wp-picker-container").each(function(){var e=t(this).find('input[type="text"]').clone();t(this).replaceWith(e)}),t(this).before(o),r.find('input[name*="color"], input[name*="background"]').wpColorPicker(n),e(a),r.stop().animate({scrollTop:a[0].scrollHeight-600},800)}),t(document).delegate('[id*="simple_soc_button"] .delete',"click",function(n){n.preventDefault();var i=t(this).parents(".ssw-forms");t(this).parents("form").change(),t(this).parent().remove(),e(i)}),t(document).delegate('[id*="simple_soc_button"] .edit-image',"click",function(e){e.preventDefault();var n=wp.media.editor.send.attachment,i=t(this);wp.media.editor.send.attachment=function(t,e){i.prev().attr("value",e.url).prev().attr("src",e.url),wp.media.editor.send.attachment=n,i.parents("form").change()},wp.media.editor.open(i)}),t(document).delegate('[id*="simple_soc_button"] .delete-image',"click",function(e){e.preventDefault(),t(this).parent().find("img").attr("src",t(this).parent().find("img").data("default")),t(this).parent().find("input").val(""),t(this).parents("form").change()}),t('[id*="simple_soc_button"] ').find('input[name*="color"], input[name*="background"]').wpColorPicker(n),t(document).delegate('[id*="simple_soc_button"] input[name="savewidget"]',"click",function(){var e=t(this).parents("form");e.find("*[required]").each(function(){!t(this)[0].checkValidity()&&t(this)[0].reportValidity()}),setTimeout(function(){e.find('label[for*="image"]').each(function(){""==!t(this).parent().find("input").attr("value")&&t(this).parent().find("img").attr("src",t(this).parent().find("input").attr("value"))}),e.find('input[name*="color"], input[name*="background"]').wpColorPicker(n)},500)})});